{"version":3,"sources":["../src/gtmCollectMetadata.js"],"names":["gtmLoadEvent","func","oldOnLoad","window","onload","metaTag","document","querySelector","$metaDataContent","getAttribute","$metaDataName","$discovery","dataLayer","push"],"mappings":";;AAAA;;;;;;AAMA,SAASA,YAAT,CAAsBC,IAAtB,EAA2B;AACvB,QAAIC,YAAYC,OAAOC,MAAvB;AACA,QAAI,OAAOD,OAAOC,MAAd,KAAyB,UAA7B,EAAyC;AACrCD,eAAOC,MAAP,GAAgBH,IAAhB;AACH,KAFD,MAEO;AACHE,eAAOC,MAAP,GAAgB,YAAY;AACxBF;AACAD;AACH,SAHD;AAIH;AACJ;AACDD,aAAa,YAAU;AACnB,QAAIK,UAAUC,SAASC,aAAT,CAAuB,sBAAvB,CAAd;AAAA,QACIC,mBAAmBH,QAAQI,YAAR,CAAqB,SAArB,CADvB;AAAA,QAEIC,gBAAgBL,QAAQI,YAAR,CAAqB,MAArB,CAFpB;AAAA,QAGIE,aAAa,WAHjB;;AAKA,QAAKD,kBAAkB,SAAvB,EAAkC;;AAE9B;AACAE,kBAAUC,IAAV,CAAe;AACX,4BAAiBL;AADN,SAAf;AAGH;AACJ,CAbD","file":"gtmCollectMetadata.js","sourcesContent":["/**\n * ------------  THE NATIONAL ARCHIVES  -----------------\n * JS - getting the content group in Discovery Details page for Google Tag Manager\n * Developer: Punal Chotrani\n **/\n\nfunction gtmLoadEvent(func){\n    let oldOnLoad = window.onload;\n    if (typeof window.onload !== 'function') {\n        window.onload = func;\n    } else {\n        window.onload = function () {\n            oldOnLoad();\n            func();\n        };\n    }\n}\ngtmLoadEvent(function(){\n    let metaTag = document.querySelector('meta[name=WT\\\\.cg_n]'),\n        $metaDataContent = metaTag.getAttribute(\"content\"),\n        $metaDataName = metaTag.getAttribute('name'),\n        $discovery = 'Discovery';\n\n    if ( $metaDataName === 'WT.cg_n') {\n\n        /*Pushing stuff to Google's Data Layer*/\n        dataLayer.push({\n            'ContentGroup' : $metaDataContent\n        });\n    }\n});"]}